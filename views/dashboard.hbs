<div class="dashboard-nav" style="background-color: lightgray;">

  <div class="user-profile"><a href="/profile">YOUR PROFILE</a></div>
  <div class="log-out"><a href="/logout">LOG OUT</a></div>

</div>

<div class="dashboard-container">

  <div class="left-column">
    <div class="food-list">
      <h2>Food List</h2>

      <div class="food-item">
        {{#each allFoodDB}}
        <a href="/details/{{_id}}">
          <h3>{{title}}</h3>
        </a>
        <p>{{categories}}</p>
        <p>{{status}}</p>
        {{/each}}
      </div>

    </div>
    <a href="/add"><i class="fas fa-plus-circle"></i>ADD & SHARE!</a>
  </div>

  <div class="food-map">
    <div id="foodsharingmap" style="width: 100%; height: 87vh"></div>
  </div>

</div>

<script>
  // var mapboxgl = require("mapbox-gl/dist/mapbox-gl.js");
  mapboxgl.accessToken =
    "pk.eyJ1IjoidmVyb25pY2FkZWxlb25oIiwiYSI6ImNrZjU0ZzM0cDBqYzgyc21kazBwbWlxemcifQ.PD9lxFAUmHtAh5TUogPICw";
  var map = new mapboxgl.Map({
    container: "foodsharingmap",
    style: "mapbox://styles/mapbox/streets-v11",
    center: [13.405, 52.52],
    zoom: 12,
    options: {
      anchor: "top-left",
    },
  });

  const popup = new mapboxgl.Popup();
  popup.addTo(map);
  popup.setLngLat([13.405, 52.52]);
  popup.setMaxWidth("400px");
  popup.setHTML(
    `<h2>Click here for more info!</h2> <button>See more</button>`
  );

  coords.forEach((location) => {
    console.log(location);
    // https://docs.mapbox.com/mapbox-gl-js/api/markers/
    let marker = new mapboxgl.Marker({
      scale: 5,
      draggable: true,
      color: "red",
      rotation: 10,
    });
    marker.setLngLat(location);
    marker.addTo(map);
    marker.on("dragend", (data) => {
      console.log("hello? Is it data?", data.target.getLngLat());
      popup.addTo(map);
      popup.setLngLat(data.target.getLngLat());
      popup.setMaxWidth("400px");
      popup.setHTML(
        `<h2>What a location</h2> <h3>location: ${data.target.getLngLat()} </h3>`
      );
    });
  });

  var marker = new mapboxgl.Marker()
    .setLngLat([52.487320, 13.318750])
    .addTo(map);

</script>